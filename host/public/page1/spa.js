import S,{useState as T}from"react";import B from"react-dom/client";var R={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E;function D(){if(E)return p;E=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,o){var i=null;if(o!==void 0&&(i=""+o),a.key!==void 0&&(i=""+a.key),"key"in a){o={};for(var s in a)s!=="key"&&(o[s]=a[s])}else o=a;return a=o.ref,{$$typeof:e,type:r,key:i,ref:a!==void 0?a:null,props:o}}return p.Fragment=t,p.jsx=n,p.jsxs=n,p}var x;function N(){return x||(x=1,R.exports=D()),R.exports}var u=N();function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(r){P(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function w(e){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function j(e,t){var n;if(typeof(n=t.domElement?function(){return t.domElement}:t.domElementGetter?t.domElementGetter:e.domElementGetter?e.domElementGetter:(function(r){var a=r.appName||r.name;if(!a)throw Error("single-spa's dom-element-getter-helpers was not given an application name as a prop, so it can't make a unique dom element container for the react application");var o="single-spa-application:".concat(a);return function(){var i=document.getElementById(o);return i||((i=document.createElement("div")).id=o,document.body.appendChild(i)),i}})(t))!="function")throw Error("single-spa's dom-element-getter-helpers was given an invalid domElementGetter for application or parcel '".concat(t.name,"'. Expected a function, received ").concat(v(n)));return function(){var r=n(t);if(!(r instanceof HTMLElement))throw Error("single-spa's dom-element-getter-helpers: domElementGetter returned an invalid dom element for application or parcel '".concat(t.name,"'. Expected HTMLElement, received ").concat(v(r)));return r}}var m=null;try{m=require("react").createContext()}catch{}var M={React:null,ReactDOM:null,ReactDOMClient:null,rootComponent:null,loadRootComponent:null,errorBoundary:null,errorBoundaryClass:null,domElementGetter:null,parcelCanUpdate:!0,suppressComponentDidCatchWarning:!1,domElements:{},renderResults:{},updateResolves:{},unmountResolves:{}};function k(e){if(w(e)!=="object")throw new Error("single-spa-react requires a configuration object");var t,n=f(f({},M),e);if(!n.React)throw new Error("single-spa-react must be passed opts.React");if(!n.ReactDOM&&!n.ReactDOMClient)throw new Error("single-spa-react must be passed opts.ReactDOM or opts.ReactDOMClient");if(n.renderType||((t=n.ReactDOMClient)!==null&&t!==void 0&&t.createRoot?n.renderType="createRoot":n.renderType="render"),!n.rootComponent&&!n.loadRootComponent)throw new Error("single-spa-react must be passed opts.rootComponent or opts.loadRootComponent");if(n.errorBoundary&&typeof n.errorBoundary!="function")throw Error("The errorBoundary opt for single-spa-react must either be omitted or be a function that returns React elements");!m&&n.React.createContext&&(m=n.React.createContext()),n.SingleSpaRoot=(function(a){function o(i){o.displayName="SingleSpaRoot(".concat(i.name,")")}return o.prototype=Object.create(a.React.Component.prototype),o.prototype.componentDidMount=function(){setTimeout(this.props.mountFinished)},o.prototype.componentWillUnmount=function(){setTimeout(this.props.unmountFinished)},o.prototype.render=function(){return setTimeout(this.props.updateFinished),this.props.children},o})(n);var r={bootstrap:_.bind(null,n),mount:F.bind(null,n),unmount:G.bind(null,n)};return n.parcelCanUpdate&&(r.update=q.bind(null,n)),r}function _(e,t){return e.rootComponent?Promise.resolve():e.loadRootComponent(t).then((function(n){e.rootComponent=n}))}function F(e,t){return new Promise((function(n,r){e.suppressComponentDidCatchWarning||!(function(s){if(!(s&&typeof s.version=="string"&&s.version.indexOf(".")>=0))return!1;var c=s.version.slice(0,s.version.indexOf("."));try{return Number(c)>=16}catch{return!1}})(e.React)||e.errorBoundary||e.errorBoundaryClass||(e.rootComponent.prototype?e.rootComponent.prototype.componentDidCatch||console.warn("single-spa-react: ".concat(t.name||t.appName||t.childAppName,"'s rootComponent should implement componentDidCatch to avoid accidentally unmounting the entire single-spa application.")):console.warn("single-spa-react: ".concat(t.name||t.appName||t.childAppName,"'s rootComponent does not implement an error boundary.  If using a functional component, consider providing an opts.errorBoundary to singleSpaReact(opts).")));var a=O(e,t,(function(){n(this)})),o=j(e,t)(),i=(function(s){var c=s.reactDom,l=s.renderType,y=s.elementToRender,h=s.domElement,d=c[l];if(typeof d!="function")throw new Error('renderType "'.concat(l,'" did not return a function.'));switch(l){case"createRoot":case"unstable_createRoot":case"createBlockingRoot":case"unstable_createBlockingRoot":var b=d(h);return b.render(y),b;case"hydrateRoot":return d(h,y);case"hydrate":default:return d(y,h),null}})({elementToRender:a,domElement:o,reactDom:g(e),renderType:A(e)});e.domElements[t.name]=o,e.renderResults[t.name]=i}))}function G(e,t){return new Promise((function(n){e.unmountResolves[t.name]=n;var r=e.renderResults[t.name];r&&r.unmount?r.unmount():g(e).unmountComponentAtNode(e.domElements[t.name]),delete e.domElements[t.name],delete e.renderResults[t.name]}))}function q(e,t){return new Promise((function(n){e.updateResolves[t.name]||(e.updateResolves[t.name]=[]),e.updateResolves[t.name].push(n);var r=O(e,t,null),a=e.renderResults[t.name];if(a&&a.render)a.render(r);else{var o=j(e,t)();g(e).render(r,o)}}))}function g(e){return e.ReactDOMClient||e.ReactDOM}function A(e){return typeof e.renderType=="function"?e.renderType():e.renderType}function O(e,t,n){var r=e.React.createElement(e.rootComponent,t),a=m?e.React.createElement(m.Provider,{value:t},r):r;return(e.errorBoundary||t.errorBoundary||e.errorBoundaryClass||t.errorBoundaryClass)&&(e.errorBoundaryClass=e.errorBoundaryClass||t.errorBoundaryClass||(function(o,i){function s(c){o.React.Component.apply(this,arguments),this.state={caughtError:null,caughtErrorInfo:null},s.displayName="SingleSpaReactErrorBoundary(".concat(c.name,")")}return s.prototype=Object.create(o.React.Component.prototype),s.prototype.render=function(){return this.state.caughtError?(o.errorBoundary||i.errorBoundary)(this.state.caughtError,this.state.caughtErrorInfo,this.props):this.props.children},s.prototype.componentDidCatch=function(c,l){this.setState({caughtError:c,caughtErrorInfo:l})},s})(e,t),a=e.React.createElement(e.errorBoundaryClass,t,a)),a=e.React.createElement(e.SingleSpaRoot,f(f({},t),{},{mountFinished:n,updateFinished:function(){e.updateResolves[t.name]&&(e.updateResolves[t.name].forEach((function(o){return o()})),delete e.updateResolves[t.name])},unmountFinished:function(){e.unmountResolves[t.name]&&(e.unmountResolves[t.name](),delete e.unmountResolves[t.name])}}),a)}function I(){const[e,t]=T(0);return u.jsxs("div",{className:"max-w-2xl",children:[u.jsx("h1",{className:"text-3xl font-bold text-indigo-700 mb-4",children:"Page 1"}),u.jsxs("p",{className:"text-gray-600 mb-6",children:["This is ",u.jsx("strong",{children:"Page 1"})," micro-frontend, built with"," ",u.jsx("span",{className:"font-mono text-sm bg-gray-100 px-1 py-0.5 rounded",children:"Vite + React"}),"."]}),u.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:[u.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Interactive Counter"}),u.jsx("p",{className:"text-4xl font-bold text-indigo-600 mb-4",children:e}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>t(n=>n+1),className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors",children:"Increment"}),u.jsx("button",{onClick:()=>t(0),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors",children:"Reset"})]})]})]})}const J=k({React:S,ReactDOMClient:B,rootComponent:I,errorBoundary(e){return u.jsx("div",{className:"p-4 text-red-600",children:"Page 1 failed to load."})}}),{bootstrap:W,mount:H,unmount:Y}=J;export{W as bootstrap,H as mount,Y as unmount};
