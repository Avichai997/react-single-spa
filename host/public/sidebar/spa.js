import B from"react";import D from"react-dom/client";var R={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E;function T(){if(E)return p;E=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var i in o)i!=="key"&&(a[i]=o[i])}else a=o;return o=a.ref,{$$typeof:e,type:r,key:u,ref:o!==void 0?o:null,props:a}}return p.Fragment=t,p.jsx=n,p.jsxs=n,p}var C;function P(){return C||(C=1,R.exports=T()),R.exports}var l=P();function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(r){M(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function O(e){return(O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function S(e,t){var n;if(typeof(n=t.domElement?function(){return t.domElement}:t.domElementGetter?t.domElementGetter:e.domElementGetter?e.domElementGetter:(function(r){var o=r.appName||r.name;if(!o)throw Error("single-spa's dom-element-getter-helpers was not given an application name as a prop, so it can't make a unique dom element container for the react application");var a="single-spa-application:".concat(o);return function(){var u=document.getElementById(a);return u||((u=document.createElement("div")).id=a,document.body.appendChild(u)),u}})(t))!="function")throw Error("single-spa's dom-element-getter-helpers was given an invalid domElementGetter for application or parcel '".concat(t.name,"'. Expected a function, received ").concat(v(n)));return function(){var r=n(t);if(!(r instanceof HTMLElement))throw Error("single-spa's dom-element-getter-helpers: domElementGetter returned an invalid dom element for application or parcel '".concat(t.name,"'. Expected HTMLElement, received ").concat(v(r)));return r}}var m=null;try{m=require("react").createContext()}catch{}var k={React:null,ReactDOM:null,ReactDOMClient:null,rootComponent:null,loadRootComponent:null,errorBoundary:null,errorBoundaryClass:null,domElementGetter:null,parcelCanUpdate:!0,suppressComponentDidCatchWarning:!1,domElements:{},renderResults:{},updateResolves:{},unmountResolves:{}};function N(e){if(O(e)!=="object")throw new Error("single-spa-react requires a configuration object");var t,n=f(f({},k),e);if(!n.React)throw new Error("single-spa-react must be passed opts.React");if(!n.ReactDOM&&!n.ReactDOMClient)throw new Error("single-spa-react must be passed opts.ReactDOM or opts.ReactDOMClient");if(n.renderType||((t=n.ReactDOMClient)!==null&&t!==void 0&&t.createRoot?n.renderType="createRoot":n.renderType="render"),!n.rootComponent&&!n.loadRootComponent)throw new Error("single-spa-react must be passed opts.rootComponent or opts.loadRootComponent");if(n.errorBoundary&&typeof n.errorBoundary!="function")throw Error("The errorBoundary opt for single-spa-react must either be omitted or be a function that returns React elements");!m&&n.React.createContext&&(m=n.React.createContext()),n.SingleSpaRoot=(function(o){function a(u){a.displayName="SingleSpaRoot(".concat(u.name,")")}return a.prototype=Object.create(o.React.Component.prototype),a.prototype.componentDidMount=function(){setTimeout(this.props.mountFinished)},a.prototype.componentWillUnmount=function(){setTimeout(this.props.unmountFinished)},a.prototype.render=function(){return setTimeout(this.props.updateFinished),this.props.children},a})(n);var r={bootstrap:_.bind(null,n),mount:G.bind(null,n),unmount:A.bind(null,n)};return n.parcelCanUpdate&&(r.update=F.bind(null,n)),r}function _(e,t){return e.rootComponent?Promise.resolve():e.loadRootComponent(t).then((function(n){e.rootComponent=n}))}function G(e,t){return new Promise((function(n,r){e.suppressComponentDidCatchWarning||!(function(i){if(!(i&&typeof i.version=="string"&&i.version.indexOf(".")>=0))return!1;var s=i.version.slice(0,i.version.indexOf("."));try{return Number(s)>=16}catch{return!1}})(e.React)||e.errorBoundary||e.errorBoundaryClass||(e.rootComponent.prototype?e.rootComponent.prototype.componentDidCatch||console.warn("single-spa-react: ".concat(t.name||t.appName||t.childAppName,"'s rootComponent should implement componentDidCatch to avoid accidentally unmounting the entire single-spa application.")):console.warn("single-spa-react: ".concat(t.name||t.appName||t.childAppName,"'s rootComponent does not implement an error boundary.  If using a functional component, consider providing an opts.errorBoundary to singleSpaReact(opts).")));var o=j(e,t,(function(){n(this)})),a=S(e,t)(),u=(function(i){var s=i.reactDom,c=i.renderType,y=i.elementToRender,h=i.domElement,d=s[c];if(typeof d!="function")throw new Error('renderType "'.concat(c,'" did not return a function.'));switch(c){case"createRoot":case"unstable_createRoot":case"createBlockingRoot":case"unstable_createBlockingRoot":var g=d(h);return g.render(y),g;case"hydrateRoot":return d(h,y);case"hydrate":default:return d(y,h),null}})({elementToRender:o,domElement:a,reactDom:b(e),renderType:q(e)});e.domElements[t.name]=a,e.renderResults[t.name]=u}))}function A(e,t){return new Promise((function(n){e.unmountResolves[t.name]=n;var r=e.renderResults[t.name];r&&r.unmount?r.unmount():b(e).unmountComponentAtNode(e.domElements[t.name]),delete e.domElements[t.name],delete e.renderResults[t.name]}))}function F(e,t){return new Promise((function(n){e.updateResolves[t.name]||(e.updateResolves[t.name]=[]),e.updateResolves[t.name].push(n);var r=j(e,t,null),o=e.renderResults[t.name];if(o&&o.render)o.render(r);else{var a=S(e,t)();b(e).render(r,a)}}))}function b(e){return e.ReactDOMClient||e.ReactDOM}function q(e){return typeof e.renderType=="function"?e.renderType():e.renderType}function j(e,t,n){var r=e.React.createElement(e.rootComponent,t),o=m?e.React.createElement(m.Provider,{value:t},r):r;return(e.errorBoundary||t.errorBoundary||e.errorBoundaryClass||t.errorBoundaryClass)&&(e.errorBoundaryClass=e.errorBoundaryClass||t.errorBoundaryClass||(function(a,u){function i(s){a.React.Component.apply(this,arguments),this.state={caughtError:null,caughtErrorInfo:null},i.displayName="SingleSpaReactErrorBoundary(".concat(s.name,")")}return i.prototype=Object.create(a.React.Component.prototype),i.prototype.render=function(){return this.state.caughtError?(a.errorBoundary||u.errorBoundary)(this.state.caughtError,this.state.caughtErrorInfo,this.props):this.props.children},i.prototype.componentDidCatch=function(s,c){this.setState({caughtError:s,caughtErrorInfo:c})},i})(e,t),o=e.React.createElement(e.errorBoundaryClass,t,o)),o=e.React.createElement(e.SingleSpaRoot,f(f({},t),{},{mountFinished:n,updateFinished:function(){e.updateResolves[t.name]&&(e.updateResolves[t.name].forEach((function(a){return a()})),delete e.updateResolves[t.name])},unmountFinished:function(){e.unmountResolves[t.name]&&(e.unmountResolves[t.name](),delete e.unmountResolves[t.name])}}),o)}function I(){return l.jsxs("aside",{className:"h-full bg-gray-800 text-gray-100 p-4 flex flex-col gap-2",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4 border-b border-gray-600 pb-2",children:"Sidebar"}),l.jsx(x,{href:"/page1",children:"ðŸ“„ Page 1"}),l.jsx(x,{href:"/page2",children:"ðŸ“„ Page 2"})]})}function x({href:e,children:t}){const n=typeof window<"u"&&window.location.pathname.startsWith(e),r=o=>{o.preventDefault();try{history.pushState(null,"",e),window.dispatchEvent(new PopStateEvent("popstate"))}catch{window.location.href=e}};return l.jsx("a",{href:e,onClick:r,className:`block px-3 py-2 rounded text-sm transition-colors ${n?"bg-indigo-600 text-white":"hover:bg-gray-700 text-gray-300"}`,children:t})}const J=N({React:B,ReactDOMClient:D,rootComponent:I,domElementGetter:()=>document.getElementById("sidebar"),errorBoundary(e){return l.jsx("div",{className:"p-4 text-red-600",children:"Sidebar failed to load."})}}),{bootstrap:U,mount:$,unmount:H}=J;export{U as bootstrap,$ as mount,H as unmount};
